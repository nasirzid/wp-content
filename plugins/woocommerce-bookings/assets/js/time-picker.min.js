jQuery(document).ready(function(l){function c(e,i){var a=e.closest("form").find(".wc-bookings-booking-form-button");if(void 0!==i){var o=e.find('[data-value="'+i+'"]');if(void 0!==o.data("value"))e.closest("div").find("input").val(i).change(),e.closest("ul").find("a").removeClass("selected"),o.addClass("selected"),a.removeClass("disabled");else a.addClass("disabled")}else a.addClass("disabled")}var r;function e(e){var i=l(e).closest("form"),a=l(e).closest("div").find("fieldset"),s=l(e).closest("div").find(".block-picker"),t=s.find(".selected"),o=parseInt(a.find("input.booking_date_year").val(),10),n=parseInt(a.find("input.booking_date_month").val(),10),d=parseInt(a.find("input.booking_date_day").val(),10);o&&n&&d&&(s.closest("div").find("input").val("").change(),s.closest("div").block({message:null,overlayCSS:{background:"#fff",backgroundSize:"16px 16px",opacity:.6}}).show(),r&&r.abort(),r=l.ajax({type:"POST",url:booking_form_params.ajax_url,data:{action:"wc_bookings_get_blocks",form:i.serialize()},success:function(e){var a,o;s.html(e),o=a=0,l(".block-picker a").each(function(){var e=l(this).width(),i=l(this).height();a<e&&(a=e),o<i&&(o=i)}),l(".block-picker a").width(a),l(".block-picker a").height(o),s.closest("div").unblock(),c(s,t.data("value"))},dataType:"html"}))}l(".block-picker").on("click","a",function(){var e=l(this).data("value");return c(l(this).closest("ul"),e),!1}),l("#wc_bookings_field_resource, #wc_bookings_field_duration").change(function(){e(this)}),l(".wc-bookings-booking-form fieldset").on("date-selected",function(){e(this)})});
